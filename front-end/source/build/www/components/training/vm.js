define(["ko","text!./view.html","slider","components/execute/vm","plugins/component"],function(e,t,n,r,i){var s=i.strings,o,u,a=3,f=0,l=0,c=0,h=null,p=null,d={chooseWeight:s.trChooseWeight,chooseRepeats:s.trChooseRepeats,measureWeight:s.trMeasureWeight,noLimit:s.trNoLimit,executeBtn:s.trExecute,exercises:e.observableArray(),selectedExercise:e.observable(null),left:e.observable(!1),right:e.observable(!1),weightDesc:e.observable(""),repeatsDesc:e.observable(""),setVisibleExercises:function(){var e=[];for(var t=f;t<u.length&&t<f+a;t++)u[t].active(!1),e.push(u[t]);this.exercises(e),this.left(f>0),this.right(f+a<u.length)},loaded:function(e){h=e.find(".weightSlider").slider({formatter:function(e){return l=e,d.weightDesc(e.toFixed(1)+" "+d.measureWeight()),"Current value: "+e}}),p=e.find(".repeatsSlider").slider({formatter:function(e){return c=e,d.repeatsDesc(e===0?d.noLimit():e),"Current value: "+e}})},show:function(t){var n=this;return t.forEach(function(t){t.active=e.observable(!1)}),t[0].active(!0),u=t,this.setVisibleExercises(0),this.isVisible(!0),$.Deferred(function(e){o=e})},prev:function(){f--,this.setVisibleExercises()},next:function(){f++,this.setVisibleExercises()},select:function(){u.forEach(function(e){e.active(!1)}),this.active(!0),h.slider("setAttribute","max",this.max),h.slider("setAttribute","min",this.min),h.slider("setAttribute","step",this.step),h.slider("setValue",this.min),p.slider("setAttribute","max",30),p.slider("setAttribute","min",0),p.slider("setAttribute","step",1),p.slider("setValue",10),d.selectedExercise(this)},execute:function(){o.notify({exerciseId:this.selectedExercise().id,weight:l,repeats:c})},showExecuting:function(e,t){r("training").show(e,t)},test:function(){var e=this;require(["model/exercises"],function(t){e.show(t).progress(function(t){console.log(JSON.stringify(t)),e.showExecuting(t.repeats,i.random(0,100)/10)})})}};return i.add(d,t,"training")});