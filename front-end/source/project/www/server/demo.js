define(['jquery'], function ($) {

    var _ME = {
        _id: 5653333,
        private: {
            friends: 3,
            gold: 5,
            money: 200,
            energy: 65,
            energyMax: 100,
            reg: {
                lastUpdateTime: new Date(),
                lastCheckLevelUpTime: new Date()
            },
            job: {
                nextTime: new Date()
            },
            gyms: [0, 1],
            body: [
                {
                    _id: 0,
                    stress: 0.2,
                    frazzle: 0.7
                },
                {
                    _id: 1,
                    stress: 0.7,
                    frazzle: 0.9
                },
                {
                    _id: 2,
                    stress: 0.3,
                    frazzle: 0.1
                },
                {
                    _id: 3,
                    stress: 0.2,
                    frazzle: 0.1
                },
                {
                    _id: 4,
                    stress: 1,
                    frazzle: 1
                },
                {
                    _id: 5,
                    stress: 1,
                    frazzle: 1
                },
                {
                    _id: 6,
                    stress: 0.3,
                    frazzle: 0.2
                },
                {
                    _id: 7,
                    stress: 0,
                    frazzle: 0
                },
                {
                    _id: 8,
                    stress: 0.5,
                    frazzle: 0.6
                },
                {
                    _id: 9,
                    stress: 0,
                    frazzle: 0
                },
                {
                    _id: 10,
                    stress: 1,
                    frazzle: 1
                },
                {
                    _id: 11,
                    stress: 1,
                    frazzle: 1
                },
                {
                    _id: 12,
                    stress: 0.8,
                    frazzle: 0.8
                },
                {
                    _id: 13,
                    stress: 0.3,
                    frazzle: 0.3
                },
                {
                    _id: 14,
                    stress: 0.5,
                    frazzle: 0.5
                },
                {
                    _id: 15,
                    stress: 0,
                    frazzle: 0
                }
            ]
        },
        public: {
            level: 120,
            awards: [],
            exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 200 }, { _id: 2, pr: 140 }]
        }
    };

    var _PLAYERS = [
        {
            _id: 1,
            public: {
                level: 5,
                awards: [],
                exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 200 }]
            }
        },
        {
            _id: 60981233,
            public: {
                level: 12,
                awards: [],
                exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 180 }, { _id: 2, pr: 110 }]
            }
        },
        {
            _id: 3,
            public: {
                level: 7,
                awards: [],
                exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 180 }, { _id: 2, pr: 110 }]
            }
        },
        {
            _id: 5653333,
            public: {
                level: 120,
                awards: [],
                exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 180 }, { _id: 2, pr: 110 }]
            }
        },
        {
            _id: 4,
            public: {
                level: 120,
                awards: [],
                exercises: [ { _id: 0, pr: 112 }, { _id: 1, pr: 180 }, { _id: 2, pr: 110 }]
            }
        }
    ];

    var _REFS = {
        "muscles": [
            {
                // Мышцы шеи
                "_id": 0,
                "power": 2,
                "mass": 1
            },
            {
                // Трапециевидные мышцы
                "_id": 1,
                "power": 4,
                "mass": 3
            },
            {
                // Дельтовидные мышцы
                "_id": 2,
                "power": 2,
                "mass": 2
            },
            {
                // Бицепс
                "_id": 3,
                "power": 3,
                "mass": 3
            },
            {
                // Трицепс
                "_id": 4,
                "power": 3,
                "mass": 3
            },
            {
                // Мышцы предплечья
                "_id": 5,
                "power": 1,
                "mass": 2
            },
            {
                // Грудные мышцы
                "_id": 6,
                "power": 3,
                "mass": 3
            },
            {
                // Косые мышцы живота
                "_id": 7,
                "power": 1,
                "mass": 0.5
            },
            {
                // Прямые мышцы живота
                "_id": 8,
                "power": 1,
                "mass": 0.5
            },
            {
                // Круглые мышцы
                "_id": 9,
                "power": 1,
                "mass": 1
            },
            {
                // Широчайшие мышцы
                "_id": 10,
                "power": 3,
                "mass": 4
            },
            {
                // Ягодичные мышцы
                "_id": 11,
                "power": 2,
                "mass": 3
            },
            {
                // Задние мышцы бедра
                "_id": 12,
                "power": 3,
                "mass": 4
            },
            {
                // Квадрицепс
                "_id": 13,
                "power": 5,
                "mass": 5
            },
            {
                // Большеберцовые мышцы
                "_id": 14,
                "power": 1,
                "mass": 2
            },
            {
                // Икроножные мышцы
                "_id": 15,
                "power": 2,
                "mass": 3
            }
        ],
        "exercises": [
            {
                // Жим лежа
                _id: 0, min: 20, max: 500, step: 2.5, coeff: 1, power: 30, energy: 5, wr: { _id: 5653333, value: 230 }, body: [
                {"_id": 2, "stress": 0.5},
                {"_id": 4, "stress": 0.8},
                {"_id": 5, "stress": 0.3},
                {"_id": 6, "stress": 1.0}
            ]
            },
            {
                // Присед
                _id: 1, min: 20, max: 600, step: 2.5, coeff: 1, power: 40, energy: 7, wr: null, body: [
                {"_id": 11, "stress": 0.7},
                {"_id": 12, "stress": 0.8},
                {"_id": 13, "stress": 1.0},
                {"_id": 14, "stress": 0.7},
                {"_id": 15, "stress": 0.3}
            ]
            },
            {
                // Становая тяга в стиле сумо
                _id: 2,
                min: 20,
                max: 700,
                step: 2.5,
                coeff: 1,
                power: 40,
                energy: 6,
                wr: null,
                body: [
                    {"_id": 1, "stress": 0.4},
                    {"_id": 2, "stress": 0.3},
                    {"_id": 5, "stress": 0.3},
                    {"_id": 9, "stress": 0.5},
                    {"_id": 10, "stress": 1.0},
                    {"_id": 11, "stress": 0.5},
                    {"_id": 12, "stress": 0.5},
                    {"_id": 13, "stress": 0.2},
                    {"_id": 14, "stress": 0.1},
                    {"_id": 15, "stress": 0.1}
                ]
            },
            {
                // Т-тяга
                _id: 3, cost: 1, min: 10, max: 300, step: 2.5, coeff: 0.4, power: 25, energy: 4, wr: null, body: [
                {"_id": 1, "stress": 0.2},
                {"_id": 2, "stress": 0.3},
                {"_id": 3, "stress": 0.7},
                {"_id": 4, "stress": 0.1},
                {"_id": 5, "stress": 0.3},
                {"_id": 9, "stress": 0.1},
                {"_id": 10, "stress": 0.7}
            ]
            },
            {
                // Подъемы на бицепс
                _id: 4,
                cost: 2,
                min: 5,
                max: 200,
                step: 1,
                coeff: 0.7,
                power: 15,
                energy: 3,
                wr: null,
                body: [
                    {"_id": 3, "stress": 1.0},
                    {"_id": 5, "stress": 0.3}
                ]
            }
        ],
        gyms: [
            {
                _id: 0,
                exercises: [0, 1, 2],
                req: null
            },
            {
                _id: 1,
                exercises: [0, 1, 2, 3],
                req: {
                    conditions: [
                        {level: 30, friends: 5},
                        {level: 5, friends: 20},
                        {gold: 20}
                    ]
                }
            },
            {
                _id: 2,
                exercises: [0, 1, 2, 3, 4],
                req: {
                    conditions: [
                        {level: 50, friends: 15},
                        {level: 30, friends: 30},
                        {level: 10, gold: 100}
                    ]
                }
            }
        ],
        "muscles_view": [
            {
                "_id": 120,
                "front": [
                    {
                        "_id": 0,
                        "map": "230,77,230,94,230,104,236,110,246,114,249,117,251,120,252,116,255,113,261,110,267,108,271,105,271,77,269,79,265,84,260,88,254,90,248,90,241,89,235,83"
                    },
                    {
                        "_id": 1,
                        "map": "230,77,221,83,210,88,202,92,197,96,195,99,202,100,208,102,215,104,223,105,230,107,230,101,230,81"
                    },
                    {
                        "_id": 1,
                        "map": "271,78,281,85,288,88,292,89,298,92,301,95,304,98,305,101,298,101,294,102,290,104,284,107,278,107,274,107,269,107,271,105,271,102,271,94,271,88,271,80"
                    },
                    {
                        "_id": 2,
                        "map": "287,112,292,108,298,104,305,102,312,101,321,103,329,107,335,112,339,118,340,125,341,129,341,130,334,130,327,132,322,135,317,138,315,139,312,133,307,127,300,119,293,114"
                    },
                    {
                        "_id": 2,
                        "map": "159,129,160,121,164,112,171,106,179,102,187,100,196,100,195,102,196,104,200,104,203,106,206,108,210,111,212,113,205,116,200,120,195,125,190,132,187,137,179,135,171,132,163,131"
                    },
                    {
                        "_id": 3,
                        "map": "332,132,341,133,348,138,352,144,353,149,354,160,352,168,349,171,343,172,338,171,327,167,321,163,315,158,312,153,312,147,314,140,318,137,325,134"
                    },
                    {
                        "_id": 3,
                        "map": "173,133,181,136,188,140,190,144,190,151,186,158,179,164,172,169,164,171,158,172,153,172,149,171,148,166,147,159,147,153,149,147,151,141,155,136,160,134,167,133"
                    },
                    {
                        "_id": 4,
                        "map": "312,154,313,162,314,167,319,172,325,175,332,176,336,177,340,176,344,173,345,172,339,172,331,168,325,165,318,160"
                    },
                    {
                        "_id": 4,
                        "map": "149,171,155,175,163,177,170,177,177,175,183,171,186,168,188,163,189,157,192,153,188,154,183,161,177,166,167,170,159,172"
                    },
                    {
                        "_id": 5,
                        "map": "98,206,96,199,92,195,87,194,85,193,91,187,105,171,113,162,119,155,125,152,138,146,144,143,146,148,147,154,147,162,149,169,151,173,157,176,163,177,166,177,163,182,159,188,152,194,146,197,137,199,124,198,117,198,109,201,102,204"
                    },
                    {
                        "_id": 5,
                        "map": "336,178,342,176,346,172,351,170,353,165,355,157,358,153,361,150,365,148,371,150,380,156,386,162,394,170,403,179,412,189,416,194,410,195,406,198,405,201,404,205,403,207,396,202,389,200,379,198,371,198,360,198,353,195,348,191,342,186"
                    },
                    {
                        "_id": 6,
                        "map": "188,139,194,146,202,151,211,158,218,161,225,161,237,158,245,155,251,151,256,154,266,158,278,160,285,160,291,158,297,153,306,148,310,143,314,139,310,130,305,124,298,118,291,113,282,110,270,108,263,109,256,113,251,118,250,119,247,115,241,112,234,109,225,109,214,113,206,116,198,122,192,129"
                    },
                    {
                        "_id": 7,
                        "map": "201,151,200,158,202,175,204,192,206,200,205,207,205,224,206,231,207,239,209,236,211,235,217,237,224,241,229,243,235,245,226,236,222,226,221,217,221,209,219,203,219,198,221,194,224,191,220,187,219,182,220,178,217,172,215,166,215,161,207,156"
                    },
                    {
                        "_id": 7,
                        "map": "267,246,273,239,277,231,279,224,280,215,280,209,284,203,285,200,283,195,278,192,279,189,281,186,281,182,280,179,284,175,285,170,286,165,286,161,290,160,295,156,300,153,301,157,300,164,299,172,297,181,297,188,295,195,293,200,295,207,297,215,297,223,295,230,293,236,289,234,285,235,277,241"
                    },
                    {
                        "_id": 8,
                        "map": "236,246,251,248,267,247,273,239,278,229,280,221,279,210,283,205,285,200,283,195,277,191,280,189,281,184,279,179,282,176,285,170,286,163,286,161,277,161,264,158,255,154,251,151,243,157,233,160,222,162,216,161,216,167,217,172,220,176,221,179,220,182,220,185,223,189,224,191,221,194,219,199,219,204,221,208,222,214,222,223,226,233,230,240"
                    },
                    {
                        "_id": 10,
                        "map": "298,188,304,182,310,175,313,168,313,161,311,154,311,147,311,143,306,148,302,151,300,153,302,162,300,173,299,180"
                    },
                    {
                        "_id": 10,
                        "map": "191,144,198,149,200,151,199,158,200,173,202,187,204,192,198,184,193,178,188,172,186,168,189,160,191,153"
                    },
                    {
                        "_id": 13,
                        "map": "251,296,254,290,259,285,262,276,266,265,270,254,274,247,279,240,287,236,291,235,294,238,294,246,298,259,306,277,312,290,315,303,317,316,316,332,314,344,311,357,310,364,306,359,305,353,304,347,300,343,297,346,296,353,293,361,287,369,282,375,280,377,277,374,274,369,270,364,268,358,266,351,263,345,259,334,255,324,253,316,251,313"
                    },
                    {
                        "_id": 13,
                        "map": "226,371,222,375,215,371,210,363,206,355,205,346,202,342,199,343,197,351,196,358,193,363,191,365,189,355,185,342,183,328,184,310,189,291,194,278,203,259,207,249,207,241,209,236,216,236,222,241,228,249,232,260,239,278,243,285,246,290,250,297,250,304,249,313,245,324,239,340,233,354,232,361,227,367"
                    },
                    {
                        "_id": 14,
                        "map": "192,389,190,404,190,422,193,446,197,467,204,485,206,487,204,476,200,455,199,436,198,415,197,404,194,391,194,389"
                    },
                    {
                        "_id": 14,
                        "map": "308,391,305,403,303,424,300,442,298,457,295,473,295,484,295,485,297,479,299,469,304,454,308,434,311,416,311,401,310,393"
                    },
                    {
                        "_id": 15,
                        "map": "278,386,279,392,285,402,290,411,294,429,295,446,294,457,291,467,288,476,287,482,286,468,283,459,281,450,275,443,271,432,268,419,269,408,274,395"
                    },
                    {
                        "_id": 15,
                        "map": "209,407,216,401,220,395,222,388,223,384,225,388,228,398,231,407,232,419,230,431,227,439,222,445,219,449,217,460,215,464,213,471,213,482,212,484,209,481,206,468,205,453,204,433,206,414"
                    }
                ]
            }
        ]
    };

    return {
        init: function () {
            return $.Deferred(function (defer) {
                defer.resolve();
            })
        },

        loadRefs: function () {
            return $.Deferred(function (defer) {
                defer.resolve(_REFS);
            });
        },

        loadMe: function (id) {
            return $.Deferred(function (defer) {
                defer.resolve(_ME);
            });
        },

        loadPlayer: function(id){
            return $.Deferred(function (defer) {
                defer.resolve($.grep(_PLAYERS, function(p) { return p._id === id; })[0]);
            });
        },

        loadPlayers: function (ids) {
            var players = $.grep([].concat(_PLAYERS), function () {
                return $.inArray(this._id, ids) !== -1;
            });

            return $.Deferred(function (defer) {
                defer.resolve(players);
            });
        },

        loadTop: function () {
            return $.Deferred(function (defer) {
                defer.resolve([].concat(_PLAYERS));
            });
        },

        saveUser: function (userSetExp) {
            console.log('User has been saved: ' + JSON.stringify(userSetExp));
        },

        saveFriendsQty: function(friends){
            console.log('FriendsQty has been saved: ' + friends);
        },

        gymExecute: function(args){
            return $.Deferred(function(defer){
                defer.resolve({
                    repeatsMax: 12,
                    repeats: args.repeats > 12 ? 12 : args.repeats,
                    energy: 3,
                    record: 'WR'
                });
            });
        },

        jobGet: function(){
            return $.Deferred(function(defer){
                defer.resolve(125); // weight
            })
        },

        jobComplete: function(){
            return $.Deferred(function(defer){
                defer.resolve(5); // money
            })
        }
    }
});