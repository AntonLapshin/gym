define(["ko","text!./view.html","plugins/component"],function(e,t,n){function i(e,t){s=[];var n=t*a/3,r=n*2,i,o=Math.min(e,t),u;for(var f=0;f<o*a;f++)f<n?u=3:f<r?u=2:u=1,f%a===0&&(i=[],s.push(i)),i.push(u)}var r,s,o=0,u=0,a=50,f={repeats:e.observable(0),percent:e.observable(30),isSuccess:e.observable(!1),isWarning:e.observable(!1),isDanger:e.observable(!1),show:function(e,t){return i(e,t),this.start(),this.isVisible(!0),$.Deferred(function(e){r=e})},start:function(){this.repeats(0),this.percent(0),this.isSuccess(!1),this.isWarning(!1),this.isDanger(!1),o=0,u=0,this.execute()},getDelay:function(e){return e===3?(this.isSuccess(!0),this.isWarning(!1),this.isDanger(!1),10):e===2?(this.isSuccess(!1),this.isWarning(!0),this.isDanger(!1),20):(this.isSuccess(!1),this.isWarning(!1),this.isDanger(!0),30)},execute:function(){var e=s[o];if(!e){r.resolve();return}var t=e[u];if(!t){r.resolve();return}f.percent((u+1)*2);var n=f.getDelay(t);u++,u===a&&(u=0,o++,f.repeats(o)),setTimeout(f.execute,n)},test:function(){this.show(1,1).then(function(){console.log("finished")})}};return n.add(f,t,"execute")});